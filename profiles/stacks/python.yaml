# Python stack profile - apply on top of claude-dev base
# Usage: lxc profile create python && lxc profile edit python < profiles/stacks/python.yaml

config:
  # Python specific environment
  environment.PYTHONDONTWRITEBYTECODE: "1"
  environment.PIP_DISABLE_PIP_VERSION_CHECK: "1"
  environment.VIRTUAL_ENV_DISABLE_PROMPT: "1"

  # Cloud-init to install Python toolchain
  user.user-data: |
    #cloud-config
    package_update: true
    packages:
      - python3
      - python3-pip
      - python3-venv
      - python3-dev
      - build-essential
      - libffi-dev
      - libssl-dev
    runcmd:
      # Install Python tools
      - |
        su - developer -c '
          pip3 install --user pipx
          export PATH="$HOME/.local/bin:$PATH"
          pipx install poetry
          pipx install pdm
          pipx install ruff
          pipx install mypy
          pipx install pytest
        '

description: Python development stack
name: python
